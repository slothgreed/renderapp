<Window
        x:Class="RenderApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:avalon="http://schemas.xceed.com/wpf/xaml/avalondock"
        xmlns:local="clr-namespace:RenderApp"
        xmlns:vm="clr-namespace:RenderApp.ViewModel"
        xmlns:vmc="clr-namespace:RenderApp.ViewModel.Controller"
        xmlns:v="clr-namespace:RenderApp.View"
        xmlns:vc="clr-namespace:RenderApp.View.Controller"
        xmlns:asset="clr-namespace:RenderApp.AssetModel"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
        mc:Ignorable="d"
        Title="RenderingApplication" MinHeight="600" MinWidth="1200"
        Height="600" Width="1200"
        xmlns:tree="clr-namespace:System.Windows.Controls;assembly=MultiSelectTreeView"
        >
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <ei:CallMethodAction MethodName="LoadedCommand" TargetObject="{Binding}"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="Closed">
            <ei:CallMethodAction MethodName="ClosedCommand" TargetObject="{Binding}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
            
    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <vm:DockPaneTemplateSelector x:Key="TabItemTemplateSelector">
            <vm:DockPaneTemplateSelector.AssetTemplate>
                <DataTemplate DataType="{x:Type vm:RootNodeViewModel}">
                    <v:RootNodeView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.AssetTemplate>
            <vm:DockPaneTemplateSelector.ShaderProgramTemplate>
                <DataTemplate  DataType="{x:Type vm:ShaderProgramViewModel}">
                    <v:ShaderProgramView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.ShaderProgramTemplate>
            <vm:DockPaneTemplateSelector.MaterialTemplate>
                <DataTemplate  DataType="{x:Type vm:MaterialViewModel}">
                    <v:MaterialView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.MaterialTemplate>
            <vm:DockPaneTemplateSelector.TexureTemplate>
                <DataTemplate  DataType="{x:Type vm:TextureViewModel}">
                    <v:TextureView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.TexureTemplate>
            <vm:DockPaneTemplateSelector.ViewportTemplate>
                <DataTemplate  DataType="{x:Type vm:ViewportViewModel}">
                    <v:ViewportView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.ViewportTemplate>
            <vm:DockPaneTemplateSelector.GeometryTemplate>
                <DataTemplate DataType="{x:Type vm:GeometryViewModel}">
                    <v:GeometryView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.GeometryTemplate>
            <vm:DockPaneTemplateSelector.ShaderTemplate>
                <DataTemplate DataType="{x:Type vm:ShaderViewModel}">
                    <v:ShaderView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.ShaderTemplate>
            <vm:DockPaneTemplateSelector.RenderTemplate>
                <DataTemplate DataType="{x:Type vm:RenderSystemViewModel}">
                    <v:RenderSystemView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.RenderTemplate>

            <vm:DockPaneTemplateSelector.VoxelTemplate>
                <DataTemplate DataType="{x:Type vmc:VoxelViewModel}">
                    <vc:VoxelView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.VoxelTemplate>
            
            <vm:DockPaneTemplateSelector.DijkstraTemplate>
                <DataTemplate DataType="{x:Type vmc:DijkstraViewModel}">
                    <vc:DijkstraView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.DijkstraTemplate>
            
            <vm:DockPaneTemplateSelector.SelectObjectTemplate>
                <DataTemplate DataType="{x:Type vmc:SelectViewModel}">
                    <vc:SelectView/>
                </DataTemplate>
            </vm:DockPaneTemplateSelector.SelectObjectTemplate>
        </vm:DockPaneTemplateSelector>
        
        <DataTemplate x:Key="TabItemHeaderTempalte">
            <DockPanel>
                <TextBlock Text="{Binding Title}" DockPanel.Dock="Left"/>
                <Button Content=" x " Command="{Binding CloseTabItem}" DockPanel.Dock="Right" Background="White"/>
            </DockPanel>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
            <RowDefinition Height="20"/>
        </Grid.RowDefinitions>
        <Menu VerticalAlignment="Top" Grid.Row="0" Height="25">
            <MenuItem Header="Project">
                <MenuItem Header="New" Command="{Binding NewProject}"/>
                <MenuItem Header="Open" Command="{Binding OpenProject}"/>
                <MenuItem Header="Save" Command="{Binding SaveProject}"/>
                <MenuItem Header="SaveAs" Command="{Binding SaveAsProject}"/>
            </MenuItem>

            <MenuItem Header="Asset">
                <MenuItem Header="Model" Command="{Binding LoadAsset}" CommandParameter="{x:Static local:RAAsset.Model}"/>
                <MenuItem Header="Texture" Command="{Binding LoadAsset}" CommandParameter="{x:Static local:RAAsset.Texture}"/>
                <MenuItem Header="Shader" Command="{Binding LoadAsset}" CommandParameter="{x:Static local:RAAsset.Shader}"/>
                <MenuItem Header="Object">
                    <MenuItem Header="Cube" Command="{Binding CreateObject}" CommandParameter="{x:Static local:RAGeometry.Cube}"/>
                    <MenuItem Header="Sphere" Command="{Binding CreateObject}" CommandParameter="{x:Static local:RAGeometry.Sphere}"/>
                    <MenuItem Header="Plane" Command="{Binding CreateObject}" CommandParameter="{x:Static local:RAGeometry.Plane}"/>
                </MenuItem>
            </MenuItem>

            <MenuItem Header="Controller">
                <MenuItem Header="Default" Command="{Binding Controller}" CommandParameter="{x:Static local:RAController.Default}"/>
                <MenuItem Header="Dijkstra" Command="{Binding Controller}" CommandParameter="{x:Static local:RAController.Dijkstra}"/>
            </MenuItem>


            <MenuItem Header="Rendering">
                <MenuItem Header="PostProcess" Command="{Binding TogglePostProcess}" IsChecked="{Binding PostProcessMode,Mode=OneWay}"/>
            </MenuItem>
            <MenuItem Header="Analyze">
                <MenuItem Header="WireFrame" Command="{Binding CreateObject}" CommandParameter="{x:Static local:RAGeometry.WireFrame}"/>
                <MenuItem Header="Polygon" Command="{Binding CreateObject}" CommandParameter="{x:Static local:RAGeometry.Polygon}"/>
                <Separator/>
                <MenuItem Header="Voxelize" Command="{Binding Voxelize}"/>
                <MenuItem Header="Octree" Command="{Binding Octree}"/>
            </MenuItem>
        </Menu>

        <Grid x:Name="mainGrid" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <v:TabControlView Grid.Column="0" Grid.Row="0" DataContext="{Binding LeftUpDockPanel}"/>
            <v:TabControlView Grid.Column="0" Grid.Row="1" DataContext="{Binding LeftDownDockPanel}"/>
            <v:TabControlView Grid.Column="2" Grid.Row="0" DataContext="{Binding RightUpDockPanel}"/>
            <v:TabControlView Grid.Column="2" Grid.Row="1" DataContext="{Binding RightDownDockPanel}"/>
            <v:TabControlView Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" DataContext="{Binding CenterDockPanel}"/>
        </Grid>
        
        <TextBlock Grid.Row="2" Text="{Binding TaskBarText}"></TextBlock>
    </Grid>
    
</Window>
